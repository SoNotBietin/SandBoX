<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platformer Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
            border: 2px solid black; /* Add a black border to the canvas */
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        
        // Set canvas dimensions to match the screen
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // Player properties
        const player = {
            x: canvas.width / 2, // Initial X position
            y: canvas.height / 2, // Initial Y position
            size: 50, // Size of the player (adjust as needed)
            color: "red", // Player color
            speed: 5, // Player movement speed (adjust as needed)
        };
        
        // Touch joystick properties
        const joystick = {
            x: canvas.width / 4, // Joystick X position
            y: canvas.height - canvas.height / 4, // Joystick Y position
            outerRadius: canvas.width / 8, // Outer circle radius (adjust as needed)
            innerRadius: canvas.width / 16, // Inner circle radius (adjust as needed)
        };
        
        // Initialize joystick position
        let joystickX = joystick.x;
        let joystickY = joystick.y;
        
        // Event listener for touch input
        canvas.addEventListener("touchmove", (e) => {
            // Calculate joystick position based on touch input
            const touchX = e.touches[0].clientX;
            const touchY = e.touches[0].clientY;
            
            // Calculate distance from joystick center
            const deltaX = touchX - joystick.x;
            const deltaY = touchY - joystick.y;
            const distance = Math.sqrt(deltaX ** 2 + deltaY ** 2);
            
            // If the touch is within the outer circle, update joystick position
            if (distance <= joystick.outerRadius) {
                joystickX = touchX;
                joystickY = touchY;
            } else {
                // Limit the joystick position to stay within the outer circle
                const angle = Math.atan2(deltaY, deltaX);
                joystickX = joystick.x + Math.cos(angle) * joystick.outerRadius;
                joystickY = joystick.y + Math.sin(angle) * joystick.outerRadius;
            }
        });
        
        // Game loop
        function gameLoop() {
            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw the player
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x - player.size / 2, player.y - player.size / 2, player.size, player.size);
            
            // Draw the touch joystick
            ctx.beginPath();
            ctx.arc(joystick.x, joystick.y, joystick.outerRadius, 0, Math.PI * 2);
            ctx.strokeStyle = "white";
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.closePath();
            
            // Draw the inner circle of the joystick
            ctx.beginPath();
            ctx.arc(joystickX, joystickY, joystick.innerRadius, 0, Math.PI * 2);
            ctx.fillStyle = "white";
            ctx.fill();
            ctx.closePath();
            
            // Update player position based on joystick input
            const deltaX = joystickX - joystick.x;
            const deltaY = joystickY - joystick.y;
            const distance = Math.sqrt(deltaX ** 2 + deltaY ** 2);
            
            if (distance > joystick.outerRadius) {
                const angle = Math.atan2(deltaY, deltaX);
                player.x += Math.cos(angle) * player.speed;
                player.y += Math.sin(angle) * player.speed;
            }
            
            // Request animation frame
            requestAnimationFrame(gameLoop);
        }
        
        // Start the game loop
        gameLoop();
    </script>
</body>
</html>
